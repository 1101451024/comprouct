(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62d7db6c"],{"0004":function(t,e,i){"use strict";var s=i("d317"),a=i.n(s);a.a},4455:function(t,e,i){"use strict";(function(t){i("4917"),i("a481");var s=i("025e");e["a"]={data:function(){return{imgList:[],fileList:[],uploadCount:0,Photos:[],ishidden:!0,isCount:!0,num:5}},created:function(){var t=this;this.$nextTick(function(){console.log(t.isCount),!0===t.isCount?t.num=5:t.num=8})},mounted:function(){var e=this,i="http://wkf.yiwindow.com/backend/",a=i+"server/media/upload?type=image";this.$nextTick(function(){e.$weui.uploader("#uploader",{url:a,auto:!0,type:"file",fileVal:"media",compress:{width:1600,height:1600,quality:.8},onBeforeQueued:function(t){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(e.$weui.alert("请上传图片"),!1):this.size>10485760?(e.$weui.alert("请上传不超过10M的图片"),!1):t.length>e.num?(e.$weui.alert("最多只能上传"+e.num+"张图片，请重新选择"),!1):e.uploadCount+1>e.num?(e.$weui.alert("最多只能上传"+e.num+"张图片"),!1):void++e.uploadCount},onQueued:function(){var t=this;s["a"].blobTobase(t,function(e){t.url=e})},onBeforeSend:function(i,s){t.extend(s,{Authorization:e.$store.state.Token})},onProgress:function(t){},onSuccess:function(t){e.imgList.push(this),0===t.code?e.Photos.push(t.result.fuid):e.$weui.alert(t.msg)},onError:function(t){console.log(this,t)}})})},watch:{uploadCount:function(t,e){t==this.num?this.ishidden=!1:this.ishidden=!0,console.log(t)}},methods:{handelGallery:function(t){console.log("执行了");var e=t.target,i=this;while(!e.classList.contains("weui-uploader__file")&&e)e=e.parentNode;if(e){var s=e.getAttribute("style")||"",a=e.getAttribute("data-id");s&&(s=s.match(/url\((.*?)\)/)[1].replace(/"/g,""));var n=i.$weui.gallery(s,{onDelete:function(){i.$weui.confirm("确定删除该图片？",function(){for(var t,s=0,l=i.imgList.length;s<l;s++){var o=i.imgList[s];if(o.id==a){t=s;break}}t>=0&&(console.log(t),i.Photos.splice(t,1),i.imgList.splice(t,1)),i.uploadCount--,e.remove(),n.hide()},function(){console.log("no deleted~ ~ ~ ~ ~ ~")})}})}}}}}).call(this,i("1157"))},"454f":function(t,e,i){i("46a7");var s=i("584a").Object;t.exports=function(t,e,i){return s.defineProperty(t,e,i)}},"46a7":function(t,e,i){var s=i("63b6");s(s.S+s.F*!i("8e60"),"Object",{defineProperty:i("d9f6").f})},4917:function(t,e,i){"use strict";var s=i("cb7c"),a=i("9def"),n=i("0390"),l=i("5f1b");i("214f")("match",1,function(t,e,i,o){return[function(i){var s=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,s):new RegExp(i)[e](String(s))},function(t){var e=o(i,t,this);if(e.done)return e.value;var c=s(t),r=String(this);if(!c.global)return l(c,r);var u=c.unicode;c.lastIndex=0;var d,p=[],_=0;while(null!==(d=l(c,r))){var m=String(d[0]);p[_]=m,""===m&&(c.lastIndex=n(r,a(c.lastIndex),u)),_++}return 0===_?null:p}]})},"4dac":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"describe_item"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isDescribe,expression:"!isDescribe"}],staticClass:"describe_placeholder"},[t._v(t._s(t.placeText))]),i("div",{staticClass:"describe_edit",attrs:{contenteditable:"plaintext-only"},domProps:{innerHTML:t._s(t.innerText)},on:{input:t.changeText}})])},a=[],n={data:function(){return{isDescribe:"",innerText:"",placeText:this.$parent.placetxt}},props:["placetxt"],mounted:function(){""!==this.$parent.textVal2&&(this.innerText=this.$parent.textVal2)},methods:{changeText:function(){this.isDescribe=this.$el.lastChild.innerHTML,this.$emit("edit-handler",this.$el.lastChild.innerHTML)}},watch:{value:function(t){this.innerText||(this.innerText=t)}}},l=n,o=(i("b4a6"),i("2877")),c=Object(o["a"])(l,s,a,!1,null,"0116c24e",null);e["a"]=c.exports},"50a2":function(t,e,i){},"85f2":function(t,e,i){t.exports=i("454f")},b4a6:function(t,e,i){"use strict";var s=i("50a2"),a=i.n(s);a.a},bd86:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var s=i("85f2"),a=i.n(s);function n(t,e,i){return e in t?a()(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},c280:function(t,e,i){},d317:function(t,e,i){},f037:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cells weui-cells_form mar_bott mar_top0 ",attrs:{id:"uploader"}},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[i("div",{staticClass:"weui-uploader"},[i("div",{staticClass:"weui-uploader__hd"},[i("p",{staticClass:"weui-uploader__title titleImg"},[t._v("上传照片 "),t.isCount?i("span",{staticClass:"countImg"},[t._v("(最多5张)")]):i("span",{staticClass:"countImg"},[t._v("(非必选  最多8张)")])])]),i("div",{staticClass:"weui-uploader__bd"},[i("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderCustomFiles"},on:{click:function(e){return t.handelGallery(e)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ishidden,expression:"ishidden"}],staticClass:"weui-uploader__input-box uploadImg"},[i("input",{staticClass:"weui-uploader__input",attrs:{id:"uploaderCustomInput",name:"img[]",type:"file",accept:"image/*",multiple:""}})])])])])])])},a=[],n=i("4455"),l=n["a"],o=(i("f368"),i("2877")),c=Object(o["a"])(l,s,a,!1,null,"7e27ba3f",null);e["a"]=c.exports},f368:function(t,e,i){"use strict";var s=i("c280"),a=i.n(s);a.a},fe90:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.msgData?i("div",{staticClass:"pages msgData"},[i("div",{staticClass:"weui-panel"},[i("div",{staticClass:"repair_data_header"},[i("div",{staticClass:"header_left"},[i("span",{staticClass:"state",class:"weixiu"+t.comInfo.status}),"1"===t.comInfo.status?i("span",[t._v("处理中")]):"2"===t.comInfo.status?i("span",[t._v("处理中")]):"3"===t.comInfo.status?i("span",[t._v("已完成")]):i("span",[t._v("已评价")])])]),i("div",{staticClass:"weui-panel__bd"},[i("a",{staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"javascript:void(0);"}},[i("div",{staticClass:"weui-media-box__bd"},["1"===t.comInfo.status||"2"===t.comInfo.status?i("div",{staticClass:"notComponey"},["1"===t.comInfo.status?i("div",{staticClass:"tip"},[t._v("回复内容：处理中，我们将尽快回复您。")]):"2"===t.comInfo.status?i("div",{staticClass:"tip"},[t._v("\n                            回复内容：尊敬的住户，您好！收到您提交的信息后，我们立即安排人员处理，目前已将您的业主数据更新，如有问题请再与我们联系，谢谢！\n                        ")]):t._e()]):t._e(),"3"===t.comInfo.status?i("div",{staticClass:"componey"},[i("div",{staticClass:"tip"},[t._v("尊敬的业主/住户：您好！您的报修已完成维修，谢谢您使用微信客服系统。")]),i("div",{},[i("button",{staticClass:"weui-btn weui-btn_primary ly-btn_whiter",on:{click:t.getExmine}},[t._v("我要评价")])])]):t._e()])])])]),"1"===t.comInfo.status||"2"===t.comInfo.status?i("div",{staticClass:"weui-cells mar_top10"},[t._m(0),i("div",{staticClass:"weui-cell beforeTop textAreas"},[i("com-textarea",{ref:"childText",on:{"edit-handler":t.onEditHandler}})],1),i("com-upload",{ref:"childUpload"}),i("div",{staticClass:"weui-btn-area"},[i("button",{staticClass:"weui-btn weui-btn_primary ly-btn_defalut",on:{click:t.newQuery}},[t._v("确定")])])],1):t._e(),i("div",{staticClass:"requairMsg mar_top15"},[i("div",{staticClass:"weui-panel"},[t._m(1),i("div",{staticClass:"weui-panel__bd"},[i("a",{staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"javascript:void(0);"}},[i("div",{staticClass:"weui-media-box__bd"},[i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("房产:")]),i("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.complaint_room))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("类型:")]),i("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.type))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label  ly-label label"},[t._v("类别:")]),i("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.complaint_type))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("标题:")]),i("p",{staticClass:"wx_flex"},[t._v(t._s(t.comInfo.title))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("内容:")]),i("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.content))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("提交人:")]),i("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.name))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("联系电话:")]),i("p",{staticClass:"wx_flexs col_phone"},[i("a",{attrs:{href:"tel:"+t.comInfo.telephone}},[t._v(t._s(t.comInfo.telephone))])])]),t.photos.length>0?i("div",{staticClass:"repair_data flex1"},[i("p",{staticClass:"weui-label ly-label label"},[t._v("上传图片")]),i("div",{staticClass:"repair_img"},[i("ul",t._l(t.photos,function(t){return i("li",[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgurl"}],key:t,attrs:{preview:"100",alt:""}})])}),0)])]):t._e()])])])])]),"1"===t.comInfo.status&&t.addMsg.length>0?i("div",{staticClass:"supple_msg mar_top15"},[i("div",{staticClass:"weui-panel mar_bott"},[t._m(2),i("div",{staticClass:"weui-panel__bd"},t._l(t.addMsg,function(e,s){return i("div",{staticClass:"repair_datas repair_flex"},[i("p",{staticClass:"media_left"},[t._v(t._s(t.comInfo.name))]),i("div",{staticClass:"weui-media-box media_right"},[i("div",{staticClass:"arcticle"},[i("p",[t._v(t._s(e.content))]),e.photos.length>0?i("div",{staticClass:"repair_img"},[i("ul",t._l(e.photos,function(t){return i("li",[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgs"}],key:t,attrs:{preview:s,alt:""}})])}),0)]):t._e()]),i("ul",{staticClass:"weui-media-box__info"},[i("li",{staticClass:"weui-media-box__info__meta"},[t._v(t._s(e.created_at))])]),t._m(3,!0)])])}),0)])]):t._e(),i("div",{staticClass:"weui-btn-area area"},[i("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.reClose}},[t._v("返回")])])]):t._e()},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cells__title"},[i("p",{staticStyle:{color:"#000"}},[t._v("问题补充")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-panel__hd"},[i("div",{staticClass:"msgTxt"},[i("span",[t._v("咨询投诉信息")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-panel__hd"},[i("div",{staticClass:"msgTxt"},[i("span",[t._v("补充信息")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"foot_info"},[i("p",[t._v("您补充信息已收到，我们会继续跟进。")])])}],n=i("bd86"),l=i("d722"),o=i("4dac"),c=i("f037"),r={data:function(){var t;return t={stateColor:"",comText:[],placetxt:"如果你有新的内容补充，请在此录入",type:"",code:this.$store.state.roomCode||"",comData:{},comInfo:{},photos:[],msgData:!1,isload:!0,loadmore:"加载更多",current:1},Object(n["a"])(t,"type",""),Object(n["a"])(t,"addMsg",[]),t},created:function(){this.type=this.$route.query.type,this.init()},components:{ComTextarea:o["a"],ComUpload:c["a"]},methods:{init:function(){var t=this,e="",i=this.$weui.loading();"complaint"===this.type?(e={company_complaint_code:this.code},Object(l["s"])(e).then(function(e){console.log(e),i.hide(),0===e.code?(t.comData=e.result,t.comInfo=e.result.complaint_info,t.photos=e.result.complaint_info.photos,t.addMsg=e.result.complaint_additional,console.log(t.comInfo),t.msgData=!0):t.$weui.alert(e.msg)})):"proplaint"===this.type?(e={property_complaint_code:this.code},Object(l["M"])(e).then(function(e){console.log(e),i.hide(),0===e.code?(t.comData=e.result,t.comInfo=e.result.complaint_info,t.photos=e.result.complaint_info.photos,t.addMsg=e.result.complaint_additional,t.msgData=!0):t.$weui.alert(e.msg)})):this.$router.push("/home")},onEditHandler:function(t){this.textVal=t,console.log(t)},newQuery:function(){var t=this;if("complaint"===this.type){var e={company_complaint_code:this.code,content:this.textVal,photos:this.$refs.childUpload.Photos};Object(l["e"])(e).then(function(e){console.log(e),0===e.code?t.resuccess():t.$weui.alert(e.msg)})}else if("proplaint"===this.type){var i={property_complaint_code:this.code,content:this.textVal,photos:this.$refs.childUpload.Photos};Object(l["D"])(i).then(function(e){console.log(e),0===e.code?t.resuccess():t.$weui.alert(e.msg)})}},resuccess:function(){var t=this;this.$store.commit("setReFresh",1),this.$weui.alert("提交成功",{buttons:[{label:"确定",type:"primary",onClick:function(){t.$router.push({name:"HouseRepair",query:{type:t.type}})}}]})},getExmine:function(){this.$router.push({name:"Examine",query:{type:this.type}})},reClose:function(){this.$router.push({name:"HouseRepair",query:{type:this.type}})},getMore:function(){this.current++,this.isload=!1,setTimeout(function(){},800)}}},u=r,d=(i("0004"),i("2877")),p=Object(d["a"])(u,s,a,!1,null,"1effaded",null);e["default"]=p.exports}}]);