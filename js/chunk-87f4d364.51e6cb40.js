(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87f4d364"],{"55ff":function(t,e,s){"use strict";var a=s("9cb1"),i=s.n(a);i.a},8377:function(t,e,s){},"8ca3":function(t,e,s){"use strict";var a=s("d759"),i=s.n(a);i.a},"90c0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pages"},[s("ul",{staticClass:"nav_tab"},[s("li",{class:{"is-actived":"Mine"===t.currentView},on:{click:function(e){return t.changeFlightMode("Mine")}}},[s("span",[t._v("我的")])]),s("li",{staticClass:"liAfter",class:{"is-actived":"All"===t.currentView},on:{click:function(e){return t.changeFlightMode("All")}}},[s("span",[t._v("全部")])]),s("li",{class:{"btn-actived":t.isView},on:{click:function(e){return t.changeFlightMode("shaixuan")}}},[t._m(0)])]),t.changes?s("div",{staticClass:"porject_lett"},[s("repair-list",{ref:"childList",attrs:{senddata:t.currentView,xsdata:t.checkData}})],1):t._e(),s("transition",{attrs:{name:"slideRight",appear:""}},[s("router-view",{staticStyle:{"animation-duration":"0.3s"},on:{checkdata:t.getChecked}})],1)],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shaixuan"},[s("span",[t._v("筛选")])])}],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasData?s("div",{staticClass:"repairTop"},[s("div",{staticClass:"allNum"},[t._v("共有"),s("span",[t._v(t._s(t.total))]),t._v("条记录")]),t.repairData.length>0?s("div",{staticClass:"hasData mar_top10"},[t._l(t.repairData,function(e){return s("div",{staticClass:"weui-panel weui-panel_access ly-panel",on:{click:function(s){return t.Repairxq(e.code)}}},["complaint"===t.type?s("div",{staticClass:"line"}):t._e(),s("div",{staticClass:"repair_data_header"},[s("div",{staticClass:"header_left"},[s("span",{staticClass:"state",class:"weixiu"+e.status}),"1"===e.status?s("span",[t._v(t._s(t.comState[0]))]):"2"===e.status?s("span",[t._v(t._s(t.comState[1]))]):"3"===e.status?s("span",[t._v(t._s(t.comState[2]))]):s("span",[t._v(t._s(t.comState[3]))])]),"complaint"===t.type?s("div",{staticClass:"header_right"},[s("span",{staticClass:"plaintType",class:"咨询"===e.type?"zixun":"tousu"},[t._v(t._s(e.type))])]):t._e()]),s("div",{staticClass:"weui-panel__bd",class:"complaint"===t.type?"mar_top15":""},[s("div",{staticClass:"weui-media-box ly-media-box weui-media-box_appmsg"},[s("div",{staticClass:"weui-media-box__bd"},[s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[0]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s((t.type,e.created_at)))])]),"repair"===t.type?s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s(e.city))])]):t._e(),"complaint"===t.type?s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),s("p",{staticClass:"wx_flex",domProps:{innerHTML:t._s(!0===e.is_relation_room?"有":"无")}})]):t._e(),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[2]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s("repair"===t.type?e.repair_room:e.complaint_room))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[3]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s("repair"===t.type?e.repair_area:e.complaint_type))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[4]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s("repair"===t.type?e.repair_type:e.title))])])])])]),t._m(0,!0)])}),s("com-loading",{ref:"loader",attrs:{pagecount:t.allCount},on:{loadmore:t.getMore}})],2):s("div",{staticClass:"notData"},[s("p",{staticClass:"repair_tip"},[t._v(t._s(t.comTip))])]),s("div",{staticClass:"weui-btn-area area"},[s("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.addRepair}},[t._v(t._s(t.comBtn))]),s("button",{staticClass:"weui-btn ly-btn_whiter",on:{click:t.reClose}},[t._v("返回")])])]):t._e()},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-panel__ft"},[s("a",{staticClass:"weui-cell weui-cell_access weui-cell_link",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"weui-cell__bd xq"},[t._v("详情")]),s("div",{staticClass:"weui-cell__ft"})])])}],o=s("6860"),c=s("bda5"),l={props:["senddata","xsdata"],data:function(){return{repair:["时间:","城市:","房屋:","区域:","项目:"],Complaint:["时间:","关联:","房屋:","类别:","标题:"],stateTxt:["待维修","已维修","已完成","已评价"],stateTxt2:["处理中","已回复","已完成","已评价"],stateColor:"",repairData:[],comData:[],comTip:"",type:"",allCount:0,pageSize:2,total:0,current:1,repairBtn:"新增报修",plaintBtn:"新增问题",comBtn:"",hasData:!1,scroll:0,stateTab:"",plaintData:[],comState:[]}},created:function(){this.type=this.$route.params.type,this.stateTab=this.senddata,this.init(this.type)},mounted:function(){window.addEventListener("scroll",this.handelScroll)},activated:function(){this.type===this.$route.params.type&&1!==this.$store.state.reFreshs||(this.stateTab=this.$store.state.relationId,this.hasData=!1,this.repairData=[],this.current=1,this.scroll=0,this.type=this.$route.params.type,this.init(this.type)),this.scroll>0?(window.scrollTo(0,this.scroll),this.scroll=0,window.addEventListener("scroll",this.handelScroll)):window.scrollTo(0,0)},deactivated:function(){window.removeEventListener("scroll",this.handelScroll)},components:{ComLoading:c["a"]},methods:{init:function(t){"complaint"===t?(this.comData=this.Complaint,this.comTip="当前无咨询投诉记录。",this.comBtn=this.plaintBtn,this.comState=this.stateTxt2,this.plintInt()):(this.comData=this.repair,this.comTip="当前没有报修记录。",this.comBtn=this.repairBtn,this.comState=this.stateTxt,this.repairInt())},plintInt:function(){var t=this,e={current_page:this.current,page_size:this.pageSize};if("Mine"===this.stateTab)1===this.current&&this.$weui.loading(),"wuye"===this.$store.state.staffType?Object(o["M"])(e).then(function(e){t.results(e)}):Object(o["v"])(e).then(function(e){t.results(e)});else if("All"===this.stateTab)1===this.current&&this.$weui.loading(),"wuye"===this.$store.state.staffType?Object(o["f"])(e).then(function(e){t.results(e)}):Object(o["n"])(e).then(function(e){t.results(e)});else if(this.$store.state.addRepair.page_size)if(1===this.current&&(this.hasData=!1,this.$weui.loading()),"wuye"===this.$store.state.staffType){var s={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,content:this.$store.state.addRepair.content,building_guid:this.$store.state.addRepair.building_guid,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date};Object(o["f"])(s).then(function(e){t.results(e)})}else{var a={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,channel:this.$store.state.addRepair.channel,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date,company_name:this.$store.state.addRepair.company_name,project_name:this.$store.state.addRepair.project_name,building_name:this.$store.state.addRepair.building_name,floor_name:this.$store.state.addRepair.floor_name,room_name:this.$store.state.addRepair.room_name,content:this.$store.state.addRepair.content};Object(o["n"])(a).then(function(e){t.results(e)})}},repairInt:function(){var t=this,e={current_page:this.current,page_size:this.pageSize};if("Mine"===this.stateTab)1===this.current&&this.$weui.loading(),"wuye"===this.$store.state.staffType?Object(o["N"])(e).then(function(e){t.results(e)}):Object(o["w"])(e).then(function(e){t.results(e)});else if("All"===this.stateTab)1===this.current&&this.$weui.loading(),"wuye"===this.$store.state.staffType?Object(o["g"])(e).then(function(e){t.results(e)}):Object(o["o"])(e).then(function(e){t.results(e)});else if(this.$store.state.addRepair.page_size)if(1===this.current&&(this.hasData=!1,this.$weui.loading()),"wuye"===this.$store.state.staffType){var s={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,content:this.$store.state.addRepair.content,building_guid:this.$store.state.addRepair.building_guid,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date};Object(o["g"])(s).then(function(e){t.results(e)})}else{var a={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,channel:this.$store.state.addRepair.channel,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date,company_name:this.$store.state.addRepair.company_name,project_name:this.$store.state.addRepair.project_name,building_name:this.$store.state.addRepair.building_name,floor_name:this.$store.state.addRepair.floor_name,room_name:this.$store.state.addRepair.room_name,content:this.$store.state.addRepair.content};Object(o["o"])(a).then(function(e){t.results(e)})}},results:function(t){if(1===this.current&&(this.repairData=[],this.$weui.loading().hide()),0===t.code){for(var e in this.hasData=!0,console.log(this.current),1!==this.current&&(this.$refs.loader.isload=!0),this.allCount=t.result.page_count,t.result.query_list)this.repairData.push(t.result.query_list[e]);this.total=t.result.rows_total}else this.$weui.alert(t.msg)},Repairxq:function(t){this.$store.commit("setRoomCode",t),this.$store.commit("setReFreshs",0),this.$store.commit("setReFresh",0),"repair"===this.type?this.$router.push({name:"RepairMsg",params:{type:this.type}}):this.$router.push({name:"PlaintMsg",params:{type:this.type}})},getMore:function(t){var e=this;this.current=t,this.$store.state.addRepair.current_page=2,console.log(this.$store.state.addRepair.current_page),setTimeout(function(){e.init(e.type)},800)},handelScroll:function(){this.scroll=document.documentElement&&document.documentElement.scrollTop},addRepair:function(){"repair"===this.type?this.$router.push({name:"StaffAddrep",params:{type:this.$store.state.staffType}}):this.$router.push({name:"StaffAddpla",params:{type:this.$store.state.staffType}})},reClose:function(){this.$router.push("/staffhome")}},watch:{},beforeRouteLeave:function(t,e,s){this.$store.commit(setReFreshs,0),s()}},h=l,d=(s("f862"),s("2877")),p=Object(d["a"])(h,r,n,!1,null,"67455f4b",null),u=p.exports,_={data:function(){return{currentView:this.$store.state.relationId||"Mine",title:"",hardList:[],areaMode:!0,parentShow:"",isView:!1,checkProject:!1,changes:!0,checkData:[],type:""}},created:function(){this.type=this.$route.params.type,"complaint"===this.$route.params.type?this.title="咨询投诉管理":this.title="报修管理","shaixuan"===this.currentView?this.isView=!0:this.isView=!1},activated:function(){this.type===this.$route.params.type&&1!==this.$store.state.reFreshs||(this.currentView=this.$store.state.relationId,this.type=this.$route.params.type,"complaint"===this.$route.params.type?this.title="咨询投诉管理":this.title="报修管理"),"shaixuan"===this.currentView?(this.changes=!0,this.isView=!0):(console.log(this.currentView),this.isView=!1)},components:{RepairList:u},methods:{changeFlightMode:function(t){var e=this;this.currentView=t,"shaixuan"===t?("wuye"===this.$store.state.staffType?this.$router.push({name:"StaffScreen",query:{type:this.$route.params.type}}):this.$router.push({name:"StaffScreenc",query:{type:this.$route.params.type}}),this.changes=!1,this.isView=!0):(this.changes=!1,setTimeout(function(){e.changes=!0},300),this.isView=!1),this.$store.commit("delAddRepair"),this.$store.commit("setrelationId",this.currentView)},getChecked:function(t){this.checkData=t,console.log(this.checkData)}},watch:{currentView:function(t,e){t&&(this.currentView=t)}},beforeRouteEnter:function(t,e,s){s(function(t){document.title=t.title})}},m=_,f=(s("8ca3"),Object(d["a"])(m,a,i,!1,null,"401ad89e",null));e["default"]=f.exports},"9cb1":function(t,e,s){},bda5:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loadAll"},[t.current<t.allcount&&t.isload?s("div",{staticClass:"loadMore",on:{click:t.getMore}},[t._v("\n\t\t加载更多\n\t\t"),s("span")]):t.current===t.allcount&&t.isload?s("div",{staticClass:"theEnd"},[t._v("已加载全部")]):t._e(),t.isload?t._e():s("div",{staticClass:"weui-loadmore"},[s("i",{staticClass:"weui-loading"}),s("span",{staticClass:"weui-loadmore__tips load_tip"},[t._v("正在加载")])])])},i=[],r={props:["pagecount"],data:function(){return{current:1,allcount:0,isload:!0}},created:function(){this.allcount=this.pagecount},methods:{getMore:function(){this.current++,this.isload=!1,this.$emit("loadmore",this.current)}}},n=r,o=(s("55ff"),s("2877")),c=Object(o["a"])(n,a,i,!1,null,null,null);e["a"]=c.exports},d759:function(t,e,s){},f862:function(t,e,s){"use strict";var a=s("8377"),i=s.n(a);i.a}}]);