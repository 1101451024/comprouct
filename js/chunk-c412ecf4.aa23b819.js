(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c412ecf4"],{4455:function(t,e,s){"use strict";(function(t){s("4917"),s("a481");var i=s("025e");e["a"]={data:function(){return{imgList:[],fileList:[],uploadCount:0,Photos:[],ishidden:!0,isCount:!0,num:5}},created:function(){var t=this;this.$nextTick(function(){console.log(t.isCount),!0===t.isCount?t.num=5:t.num=8})},mounted:function(){var e=this,s="http://wkf.yiwindow.com/backend/",a=s+"server/media/upload?type=image";this.$nextTick(function(){e.$weui.uploader("#uploader",{url:a,auto:!0,type:"file",fileVal:"media",compress:{width:1600,height:1600,quality:.8},onBeforeQueued:function(t){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(e.$weui.alert("请上传图片"),!1):this.size>10485760?(e.$weui.alert("请上传不超过10M的图片"),!1):t.length>e.num?(e.$weui.alert("最多只能上传"+e.num+"张图片，请重新选择"),!1):e.uploadCount+1>e.num?(e.$weui.alert("最多只能上传"+e.num+"张图片"),!1):void++e.uploadCount},onQueued:function(){var t=this;i["a"].blobTobase(t,function(e){t.url=e})},onBeforeSend:function(s,i){t.extend(i,{Authorization:e.$store.state.Token})},onProgress:function(t){},onSuccess:function(t){e.imgList.push(this),0===t.code?e.Photos.push(t.result.fuid):e.$weui.alert(t.msg)},onError:function(t){console.log(this,t)}})})},watch:{uploadCount:function(t,e){t==this.num?this.ishidden=!1:this.ishidden=!0,console.log(t)}},methods:{handelGallery:function(t){console.log("执行了");var e=t.target,s=this;while(!e.classList.contains("weui-uploader__file")&&e)e=e.parentNode;if(e){var i=e.getAttribute("style")||"",a=e.getAttribute("data-id");i&&(i=i.match(/url\((.*?)\)/)[1].replace(/"/g,""));var n=s.$weui.gallery(i,{onDelete:function(){s.$weui.confirm("确定删除该图片？",function(){for(var t,i=0,o=s.imgList.length;i<o;i++){var l=s.imgList[i];if(l.id==a){t=i;break}}t>=0&&(console.log(t),s.Photos.splice(t,1),s.imgList.splice(t,1)),s.uploadCount--,e.remove(),n.hide()},function(){console.log("no deleted~ ~ ~ ~ ~ ~")})}})}}}}}).call(this,s("1157"))},"454f":function(t,e,s){s("46a7");var i=s("584a").Object;t.exports=function(t,e,s){return i.defineProperty(t,e,s)}},"46a7":function(t,e,s){var i=s("63b6");i(i.S+i.F*!s("8e60"),"Object",{defineProperty:s("d9f6").f})},4917:function(t,e,s){"use strict";var i=s("cb7c"),a=s("9def"),n=s("0390"),o=s("5f1b");s("214f")("match",1,function(t,e,s,l){return[function(s){var i=t(this),a=void 0==s?void 0:s[e];return void 0!==a?a.call(s,i):new RegExp(s)[e](String(i))},function(t){var e=l(s,t,this);if(e.done)return e.value;var c=i(t),r=String(this);if(!c.global)return o(c,r);var u=c.unicode;c.lastIndex=0;var d,p=[],f=0;while(null!==(d=o(c,r))){var m=String(d[0]);p[f]=m,""===m&&(c.lastIndex=n(r,a(c.lastIndex),u)),f++}return 0===f?null:p}]})},"4dac":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"describe_item"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isDescribe,expression:"!isDescribe"}],staticClass:"describe_placeholder"},[t._v(t._s(t.placeText))]),s("div",{staticClass:"describe_edit",attrs:{contenteditable:"plaintext-only"},domProps:{innerHTML:t._s(t.innerText)},on:{focus:t.focusIn,input:t.changeText,blur:t.blurIn}})])},a=[],n={data:function(){return{isDescribe:"",innerText:"",placeText:"",bodys:0}},props:["placetxt"],mounted:function(){this.$parent.textVal2||this.$parent.textVal?(this.innerText=this.$parent.textVal2,this.placeText=""):this.placeText=this.$parent.placetxt},methods:{changeText:function(){this.isDescribe=this.$el.lastChild.innerHTML,this.$emit("edit-handler",this.$el.lastChild.innerHTML)},focusIn:function(){this.bodys=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop},blurIn:function(){window.scroll(0,this.bodys)}},watch:{value:function(t){this.innerText||(this.innerText=t)}}},o=n,l=(s("9bef"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"a3c529bc",null);e["a"]=c.exports},"85f2":function(t,e,s){t.exports=s("454f")},9493:function(t,e,s){"use strict";var i=s("f3f3"),a=s.n(i);a.a},"9bef":function(t,e,s){"use strict";var i=s("fbd1"),a=s.n(i);a.a},bd86:function(t,e,s){"use strict";s.d(e,"a",function(){return n});var i=s("85f2"),a=s.n(i);function n(t,e,s){return e in t?a()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},c280:function(t,e,s){},f037:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-cells weui-cells_form mar_bott mar_top0 ",attrs:{id:"uploader"}},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui-uploader"},[s("div",{staticClass:"weui-uploader__hd"},[s("p",{staticClass:"weui-uploader__title titleImg"},[t._v("上传照片 "),t.isCount?s("span",{staticClass:"countImg"},[t._v("(最多5张)")]):s("span",{staticClass:"countImg"},[t._v("(非必选  最多8张)")])])]),s("div",{staticClass:"weui-uploader__bd"},[s("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderCustomFiles"},on:{click:function(e){return t.handelGallery(e)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.ishidden,expression:"ishidden"}],staticClass:"weui-uploader__input-box uploadImg"},[s("input",{staticClass:"weui-uploader__input",attrs:{id:"uploaderCustomInput",name:"img[]",type:"file",accept:"image/*",multiple:""}})])])])])])])},a=[],n=s("4455"),o=n["a"],l=(s("f368"),s("2877")),c=Object(l["a"])(o,i,a,!1,null,"7e27ba3f",null);e["a"]=c.exports},f368:function(t,e,s){"use strict";var i=s("c280"),a=s.n(i);a.a},f3f3:function(t,e,s){},fbd1:function(t,e,s){},fe90:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.msgData?s("div",{staticClass:"pages msgData"},[s("div",{staticClass:"weui-panel"},[s("div",{staticClass:"repair_data_header"},[s("div",{staticClass:"header_left"},[s("span",{staticClass:"state",class:"weixiu"+t.comInfo.status}),"1"===t.comInfo.status?s("span",[t._v("处理中")]):"2"===t.comInfo.status?s("span",[t._v("处理中")]):"3"===t.comInfo.status?s("span",[t._v("已完成")]):s("span",[t._v("已评价")])])]),s("div",{staticClass:"weui-panel__bd"},[s("a",{staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"weui-media-box__bd"},["1"===t.comInfo.status||"2"===t.comInfo.status?s("div",{staticClass:"notComponey"},["1"===t.comInfo.status?s("div",{staticClass:"tip"},[t._v("回复内容：处理中，我们将尽快回复您。")]):"2"===t.comInfo.status?s("div",{staticClass:"tip"},[t._v("\n                            回复内容：尊敬的住户，您好！收到您提交的信息后，我们立即安排人员处理，目前已将您的业主数据更新，如有问题请再与我们联系，谢谢！\n                        ")]):t._e()]):t._e(),"3"===t.comInfo.status||"4"===t.comInfo.status?s("div",{staticClass:"componey"},[s("div",{staticClass:"tip"},[t._v("回复内容："+t._s(t.comInfo.reply_content))]),"3"===t.comInfo.status?s("div",{},[s("button",{staticClass:"weui-btn weui-btn_primary ly-btn_whiter",on:{click:t.getExmine}},[t._v("我要评价")])]):t._e()]):t._e()])])])]),"1"===t.comInfo.status||"2"===t.comInfo.status?s("div",{staticClass:"weui-cells mar_top10"},[t._m(0),s("div",{staticClass:"weui-cell beforeTop textAreas"},[s("com-textarea",{ref:"childText",on:{"edit-handler":t.onEditHandler}})],1),s("com-upload",{ref:"childUpload"}),s("div",{staticClass:"weui-btn-area"},[s("button",{staticClass:"weui-btn weui-btn_primary ly-btn_defalut",on:{click:t.newQuery}},[t._v("确定")])])],1):t._e(),s("div",{staticClass:"requairMsg mar_top15"},[s("div",{staticClass:"weui-panel"},[t._m(1),s("div",{staticClass:"weui-panel__bd"},[s("a",{staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"weui-media-box__bd"},[s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("房产:")]),s("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.complaint_room))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("类型:")]),s("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.type))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label  ly-label label"},[t._v("类别:")]),s("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.complaint_type))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("标题:")]),s("p",{staticClass:"wx_flex"},[t._v(t._s(t.comInfo.title))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("内容:")]),s("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.content))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("提交人:")]),s("p",{staticClass:"wx_flexs"},[t._v(t._s(t.comInfo.name))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("联系电话:")]),s("p",{staticClass:"wx_flexs col_phone"},[s("a",{attrs:{href:"tel:"+t.comInfo.telephone}},[t._v(t._s(t.comInfo.telephone))])])]),t.photos.length>0?s("div",{staticClass:"repair_data flex1"},[s("p",{staticClass:"weui-label ly-label label"},[t._v("上传图片")]),s("div",{staticClass:"repair_img"},[s("ul",t._l(t.photos,function(t){return s("li",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgurl"}],key:t,attrs:{preview:"100",alt:""}})])}),0)])]):t._e()])])])])]),"1"===t.comInfo.status||"2"===t.comInfo.status?s("div",{staticClass:"supple_msg mar_top15"},[t.addMsg.length>0?s("div",{staticClass:"weui-panel mar_bott"},[t._m(2),s("div",{staticClass:"weui-panel__bd"},t._l(t.addMsg,function(e,i){return s("div",{staticClass:"repair_datas repair_flex"},[s("p",{staticClass:"media_left"},[t._v(t._s(t.comInfo.name))]),s("div",{staticClass:"weui-media-box media_right"},[s("div",{staticClass:"arcticle"},[s("p",[t._v(t._s(e.content))]),e.photos.length>0?s("div",{staticClass:"repair_img"},[s("ul",t._l(e.photos,function(t){return s("li",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"imgs"}],key:t,attrs:{preview:i,alt:""}})])}),0)]):t._e()]),s("ul",{staticClass:"weui-media-box__info"},[s("li",{staticClass:"weui-media-box__info__meta"},[t._v(t._s(e.created_at))])]),t._m(3,!0)])])}),0)]):t._e()]):t._e(),s("div",{staticClass:"weui-btn-area area"},[s("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.reClose}},[t._v("返回")])])]):t._e()},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-cells__title"},[s("p",{staticStyle:{color:"#000"}},[t._v("问题补充")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-panel__hd"},[s("div",{staticClass:"msgTxt"},[s("span",[t._v("咨询投诉信息")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-panel__hd"},[s("div",{staticClass:"msgTxt"},[s("span",[t._v("补充信息")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"foot_info"},[s("p",[t._v("您补充信息已收到，我们会继续跟进。")])])}],n=s("bd86"),o=s("d722"),l=s("4dac"),c=s("f037"),r={data:function(){var t;return t={stateColor:"",comText:[],placetxt:"如果你有新的内容补充，请在此录入",type:"",code:this.$store.state.roomCode||"",comData:{},comInfo:{},photos:[],msgData:!1,isload:!0,loadmore:"加载更多",current:1},Object(n["a"])(t,"type",""),Object(n["a"])(t,"addMsg",[]),t},created:function(){this.type=this.$route.query.type,this.init()},components:{ComTextarea:l["a"],ComUpload:c["a"]},methods:{init:function(){var t=this,e="",s=this.$weui.loading();"complaint"===this.type?(e={company_complaint_code:this.code},Object(o["s"])(e).then(function(e){console.log(e),s.hide(),0===e.code?(t.comData=e.result,t.comInfo=e.result.complaint_info,t.photos=e.result.complaint_info.photos,t.addMsg=e.result.complaint_additional,console.log(t.comInfo),t.msgData=!0):t.$weui.alert(e.msg)})):"proplaint"===this.type?(e={property_complaint_code:this.code},Object(o["M"])(e).then(function(e){console.log(e),s.hide(),0===e.code?(t.comData=e.result,t.comInfo=e.result.complaint_info,t.photos=e.result.complaint_info.photos,t.addMsg=e.result.complaint_additional,t.msgData=!0):t.$weui.alert(e.msg)})):this.$router.push("/home")},onEditHandler:function(t){this.textVal=t,console.log(t)},newQuery:function(){var t=this;if("complaint"===this.type){var e={company_complaint_code:this.code,content:this.textVal,photos:this.$refs.childUpload.Photos};Object(o["e"])(e).then(function(e){console.log(e),0===e.code?t.resuccess():t.$weui.alert(e.msg)})}else if("proplaint"===this.type){var s={property_complaint_code:this.code,content:this.textVal,photos:this.$refs.childUpload.Photos};Object(o["D"])(s).then(function(e){console.log(e),0===e.code?t.resuccess():t.$weui.alert(e.msg)})}},resuccess:function(){var t=this;this.$store.commit("setReFresh",1),this.$weui.alert("提交成功",{buttons:[{label:"确定",type:"primary",onClick:function(){t.$router.push({name:"HouseRepair",query:{type:t.type}})}}]})},getExmine:function(){this.$router.push({name:"Examine",query:{type:this.type}})},reClose:function(){this.$router.push({name:"HouseRepair",query:{type:this.type}})},getMore:function(){this.current++,this.isload=!1,setTimeout(function(){},800)}}},u=r,d=(s("9493"),s("2877")),p=Object(d["a"])(u,i,a,!1,null,"7f7045e8",null);e["default"]=p.exports}}]);