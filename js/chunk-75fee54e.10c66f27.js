(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75fee54e"],{3594:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"houseRepair"},[i("div",{staticClass:"weui-cells mar_top0"},[i("div",{staticClass:"weui-cell ly-cell weui-cell_access",on:{click:t.getBindRoom}},[t._m(0),i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v(t._s(t.houseTitle||"请选择"))])]),i("div",{staticClass:"weui-cell__ft ft_color"},[t._v("更换")])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-cell__hd header_img"},[s("img",{attrs:{src:i("4fc8")}})])}],o=(i("b54a"),{props:["sendroom"],data:function(){return{houseTitle:this.$store.state.roomId.roomName||"",houseId:this.$store.state.roomId.roomGuid||"",type:"",isBind:0}},created:function(){if(this.sendroom.room_name){console.log(this.sendroom);var t={roomName:this.sendroom.room_name,roomGuid:this.sendroom.room_guid};this.houseTitle=this.sendroom.room_name,this.houseId=this.sendroom.room_guid,this.$store.commit("setRoomId",t)}else this.houseTitle=this.sendroom,this.isBind=1;this.$route.params.type?this.type=this.$route.params.type:this.type=this.$route.query.type},methods:{getBindRoom:function(){this.$parent.link?0===this.isBind?this.$router.push({name:"comHouse",query:{type:this.type,owId:this.$parent.link}}):this.$router.push({name:"houseRelation",params:{type:this.type}}):this.$router.push({name:"comHouse",query:{type:this.type}})}},beforeRouteLeave:function(t,e,i){t.meta.keepAlive=!0,i()}}),r=o,n=(i("d63b"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"2e928f45",null);e["a"]=l.exports},"386b":function(t,e,i){var s=i("5ca1"),a=i("79e5"),o=i("be13"),r=/"/g,n=function(t,e,i,s){var a=String(o(t)),n="<"+e;return""!==i&&(n+=" "+i+'="'+String(s).replace(r,"&quot;")+'"'),n+">"+a+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(n),s(s.P+s.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},"44e1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.ishouse?i("div",{staticClass:"pages"},[t.flag?i("div",{staticClass:"weui-cells mar_top0"},[i("div",{staticClass:"weui-cell ly-cell weui-cell_access",on:{click:t.getBindRoom}},[t._m(0),i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v(t._s(t.houseTitle))])]),i("div",{staticClass:"weui-cell__ft ft_color"},[t._v("更换")])])]):t._e(),i("div",[t.repairData.length>0?i("div",{staticClass:"hasData mar_top10"},[t._l(t.repairData,function(e){return i("div",{staticClass:"weui-panel weui-panel_access ly-panel",on:{click:function(i){return t.Repairxq(e.code)}}},[i("div",{staticClass:"repair_data_header"},["repair"===t.type||"prorepair"===t.type?i("div",{staticClass:"header_left"},[i("span",{staticClass:"state",class:"weixiu"+e.status}),"1"===e.status?i("span",[t._v("待维修")]):"2"===e.status?i("span",[t._v("已维修")]):"3"===e.status?i("span",[t._v("已完成")]):i("span",[t._v("已评价")])]):i("div",{staticClass:"header_left"},[i("span",{staticClass:"state",class:"chuli"+e.status}),"1"===e.status?i("span",[t._v("处理中")]):"2"===e.status?i("span",[t._v("处理中")]):"3"===e.status?i("span",[t._v("已完成")]):i("span",[t._v("已评价")])]),i("div",{staticClass:"header_right"},[i("span",{staticClass:"repair_time"},[t._v(t._s(e.created_at))])])]),i("div",{staticClass:"weui-panel__bd"},[i("div",{staticClass:"weui-media-box ly-media-box weui-media-box_appmsg"},[i("div",{staticClass:"weui-media-box__bd"},[i("div",{staticClass:"repair_data"},[i("p",{staticClass:"label"},[t._v(t._s(t.comData[0]))]),i("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?e.repair_area:e.relation_room))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),i("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?e.repair_type:e.type))])]),i("div",{staticClass:"repair_data"},[i("p",{staticClass:"label"},[t._v(t._s(t.comData[2]))]),i("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?"微信提交":e.complaint_type))])]),t.isShow?i("div",{staticClass:"repair_data"},[i("p",{staticClass:"label"},[t._v(t._s(t.comData[3]))]),i("p",{staticClass:"wx_flex"},[t._v(t._s(e.title))])]):t._e()])])]),t._m(1,!0)])}),i("com-loading",{ref:"loader",attrs:{pagecount:t.allcount},on:{loadmore:t.getMore}})],2):i("div",{staticClass:"notData"},[i("p",{staticClass:"repair_tip"},[t._v(t._s(t.comTip))]),i("p",{staticClass:"repair_tip2"},[t._v(t._s(t.comTip2))])]),i("div",{staticClass:"weui-btn-area area"},[i("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.addRepair}},[t._v(t._s(t.comBtn))]),i("button",{staticClass:"weui-btn ly-btn_whiter",on:{click:t.reClose}},[t._v("返回")])])])]):t._e()},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-cell__hd header_img"},[s("img",{attrs:{src:i("4fc8")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-panel__ft"},[i("a",{staticClass:"weui-cell weui-cell_access weui-cell_link",attrs:{href:"javascript:void(0);"}},[i("div",{staticClass:"weui-cell__bd xq"},[t._v("详情")]),i("div",{staticClass:"weui-cell__ft"})])])}],o=(i("7f7f"),i("d722")),r=i("3594"),n=i("bda5"),l={data:function(){return{repair:["报修区域:","报修项目:","报修渠道:"],Complaint:["房产:","类型:","类别:","标题:"],repairBtn:"新增报修",plaintBtn:"新增咨询投诉",stateColor:"",repairData:[],comData:[],type:"",comTip:"",comTip2:"",isShow:!1,title:"",comBtn:"",current:1,guid:"",allcount:0,flag:!1,ishouse:!1,houseTitle:"请选择",pageSize:2,scroll:0}},created:function(){this.type=this.$route.query.type,"complaint"===this.type||"proplaint"===this.type?(this.title="咨询投诉",this.comData=this.Complaint,this.isShow=!0,this.comTip="您还没有咨询投诉记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.plaintBtn,this.comInit(this.type)):("repair"===this.type?this.comRepair():this.comPropair(),this.title="房屋报修",this.comData=this.repair,this.comTip="您本人在当前房屋没有报修记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.repairBtn)},mounted:function(){window.addEventListener("scroll",this.handelScroll)},activated:function(){this.type===this.$route.query.type&&1!==this.$store.state.reFresh||(console.log("执行了"),this.scroll=0,this.stateColor="",this.current=1,this.flag=!1,this.ishouse=!1,this.repairData=[],this.isShow=!1,this.type=this.$route.query.type,window.addEventListener("scroll",this.handelScroll),"complaint"===this.type||"proplaint"===this.type?(this.title="咨询投诉",this.comData=this.Complaint,this.isShow=!0,this.comTip="您还没有咨询投诉记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.plaintBtn,this.comInit(this.type)):("repair"===this.type?this.comRepair():this.comPropair(),this.title="房屋报修",this.comData=this.repair,this.comTip="您本人在当前房屋没有报修记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.repairBtn)),this.scroll>0?(console.log(this.scroll),window.scrollTo(0,this.scroll),this.scroll=0,window.addEventListener("scroll",this.handelScroll)):window.scrollTo(0,0)},deactivated:function(){window.removeEventListener("scroll",this.handelScroll)},components:{ComHeader:r["a"],ComLoading:n["a"]},methods:{comInit:function(t){var e=this,i="";1===this.current&&(i=this.$weui.loading());var s={room_guid:this.guid,current_page:this.current,page_size:this.pageSize},a={current_page:this.current,page_size:this.pageSize},r={relation_guid:this.$store.state.relationId,current_page:this.current,page_size:this.pageSize};"repair"===t?Object(o["o"])(s).then(function(t){if(1===e.current?(e.repairData=[],i.hide()):e.$refs.loader.isload=!0,console.log(t),0===t.code)for(var s in e.ishouse=!0,e.flag=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[s]);else e.$weui.alert(t.msg)}):"complaint"===t?Object(o["n"])(a).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],i.hide()):e.$refs.loader.isload=!0,0===t.code)for(var s in e.ishouse=!0,e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[s]);else e.$weui.alert(t.msg)}):"prorepair"===t?Object(o["N"])(s).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],i.hide()):e.$refs.loader.isload=!0,0===t.code){for(var s in e.flag=!0,e.ishouse=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[s]);console.log(e.repairData)}else e.$weui.alert(t.msg)}):"proplaint"===t&&Object(o["L"])(r).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],i.hide()):e.$refs.loader.isload=!0,0===t.code)for(var s in e.ishouse=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[s]);else e.$weui.alert(t.msg)})},comRepair:function(){var t=this;this.guid=this.$store.state.roomId.roomGuid,this.guid?(this.houseTitle=this.$store.state.roomId.roomName,this.comInit(this.type)):Object(o["m"])().then(function(e){if(0===e.code){t.houseTitle=e.result[0].room_name,t.guid=e.result[0].room_guid;var i={roomName:t.houseTitle,roomGuid:t.guid};t.$store.commit("setRoomId",i),t.comInit(t.type)}else t.$weui.alert(e.msg)})},comPropair:function(){var t=this;if(this.guid=this.$store.state.proRoom.roomGuid,this.guid)this.houseTitle=this.$store.state.proRoom.roomName,this.comInit(this.type);else{var e={relation_guid:this.$store.state.relationId};Object(o["Q"])(e).then(function(e){if(0===e.code){t.houseTitle=e.result[0].room_name,t.guid=e.result[0].room_guid;var i={roomName:t.houseTitle,roomGuid:t.guid};t.$store.commit("setProRoom",i),t.comInit(t.type)}else t.$weui.alert(e.msg)})}},getBindRoom:function(){this.$router.push({name:"comHouse",query:{type:this.type}})},addRepair:function(){"repair"===this.type||"prorepair"===this.type?this.$router.push({name:"AddRepair",params:{type:this.type}}):this.$router.push({name:"Relate",params:{type:this.type}})},reClose:function(){"repair"===this.type||"complaint"===this.type?this.$router.push("/home"):this.$router.push("/estate")},handelScroll:function(){this.scroll=document.documentElement&&document.documentElement.scrollTop,console.log(this.scroll)},Repairxq:function(t){this.$store.commit("setRoomCode",t),"repair"===this.type||"prorepair"===this.type?this.$router.push({name:"HouseReMsg",query:{type:this.type}}):this.$router.push({name:"plaintMsg",query:{type:this.type}})},getMore:function(t){var e=this;this.current=t,setTimeout(function(){e.comInit(e.type)},800)}},beforeRouteEnter:function(t,e,i){i(function(t){document.title=t.title})},beforeRouteLeave:function(t,e,i){"comHouse"===t.name||this.$store.commit("delReFresh"),i()}},c=l,u=(i("7de6"),i("2877")),p=Object(u["a"])(c,s,a,!1,null,"6fa5360a",null);e["default"]=p.exports},"4fc8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAqCAMAAAAK/cKeAAAAtFBMVEUAAAAnpfknpflPsfQnpfknpfknpfl6vu0npfl6vu16vu0npfl6vu0npfl6vu0npfknpfknpfl6vu0npfknpfknpfl6vu0npfknpfknpfknpfl6vu0npfknpfknpfknpfknpfknpfknpfl6vu0npfknpfl6vu0npfknpfknpfknpfknpfl6vu0npfknpfknpfknpfl6vu0npfknpfknpfknpfknpfknpfknpfl6vu0npfl6vu31d9BmAAAAOnRSTlMACfAF2zYOC/v4s6WVW0GeFOrXtXx4K/PhvpqPjk9JIPXWyLyUg3wuKALSzJBsajsa1MG6qm1iVEMq6O2XwgAAAdhJREFUOMt1k9liqkAQRAcExBgUxS3uJhr3JfvN4f//69IsGRGsl6aasqumcdQV7FVgmZhWsLJVCYyThYZ1NG4FkwF5DCb5AUNpmk1v4yhn4zVNocOrMc6TvO/qjtEVzZOT8YoI6n5uql8XSSVlYtEtRO+KURpSCwqSSew5iCxUGSKjgWQ7QSvL8Dtq12rt0W96gBYco2rBV5r4MUzxWI0bR7CiVYNpJIKX8A8vlTiACbbqQFPFkAkPjWq18SBT4lYTOioAL2a9qP+aaF+jx548eBBIjHXcHkUTVIpoykjqWoKYkCy3HYaNTNEIw3Z8GugrYBt3a2FYzRTVMKxJ3YIrM/y7Ch9a6hn+lbm8ST3DXo1hVZb0ILUDSzUF695pxeBHVVqZTXFjG+gbSmyCO1tfJvueuWCXfjm/n76pw4dK0DtEX//t0EvYCp6lxkOmqojLPOtLEssoKpoyQv+XxgWB7cI5I9/g3l7Vyh4+Nf2ARd5H1mleNJ31oV7w+LpueICnNIwFvG9v78Z8rekS+rOM6B9ZfsZ+9EiNjalv8npeeg2nLnzG1pcB7AxVxInkUzo7aGUhCitgWHHeYW6rcoyBYA/uRN3DkhjfGb9j5ObOWTzRYnfOd/4D6GJZSo18hSIAAAAASUVORK5CYII="},"55ff":function(t,e,i){"use strict";var s=i("9cb1"),a=i.n(s);a.a},6417:function(t,e,i){},"7de6":function(t,e,i){"use strict";var s=i("6417"),a=i.n(s);a.a},"7f7f":function(t,e,i){var s=i("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,r="name";r in a||i("9e1e")&&s(a,r,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"9cb1":function(t,e,i){},b54a:function(t,e,i){"use strict";i("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},bb21:function(t,e,i){},bda5:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loadAll"},[t.current<t.allcount&&t.isload?i("div",{staticClass:"loadMore",on:{click:t.getMore}},[t._v("\n\t\t加载更多\n\t\t"),i("span")]):t.current===t.allcount&&t.isload?i("div",{staticClass:"theEnd"},[t._v("已加载全部")]):t._e(),t.isload?t._e():i("div",{staticClass:"weui-loadmore"},[i("i",{staticClass:"weui-loading"}),i("span",{staticClass:"weui-loadmore__tips load_tip"},[t._v("正在加载")])])])},a=[],o={props:["pagecount"],data:function(){return{current:1,allcount:0,isload:!0}},created:function(){this.allcount=this.pagecount},methods:{getMore:function(){this.current++,this.isload=!1,this.$emit("loadmore",this.current)}}},r=o,n=(i("55ff"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},d63b:function(t,e,i){"use strict";var s=i("bb21"),a=i.n(s);a.a}}]);