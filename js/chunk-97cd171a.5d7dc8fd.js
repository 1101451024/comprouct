(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97cd171a"],{"2ec5":function(t,e,s){},3594:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"houseRepair"},[s("div",{staticClass:"weui-cells mar_top0"},[s("div",{staticClass:"weui-cell ly-cell weui-cell_access",on:{click:t.getBindRoom}},[t._m(0),s("div",{staticClass:"weui-cell__bd"},[s("p",[t._v(t._s(t.houseTitle||"请选择"))])]),s("div",{staticClass:"weui-cell__ft ft_color"},[t._v("更换")])])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__hd header_img"},[i("img",{attrs:{src:s("4fc8")}})])}],o=(s("b54a"),{props:["sendroom"],data:function(){return{houseTitle:this.$store.state.roomId.roomName||"",houseId:this.$store.state.roomId.roomGuid||"",type:"",isBind:0}},created:function(){if(this.sendroom.room_name){console.log(this.sendroom);var t={roomName:this.sendroom.room_name,roomGuid:this.sendroom.room_guid};this.houseTitle=this.sendroom.room_name,this.houseId=this.sendroom.room_guid,this.$store.commit("setRoomId",t)}else this.houseTitle=this.sendroom,this.isBind=1;this.$route.params.type?this.type=this.$route.params.type:this.type=this.$route.query.type},methods:{getBindRoom:function(){this.$parent.link?0===this.isBind?this.$router.push({name:"comHouse",query:{type:this.type,owId:this.$parent.link}}):this.$router.push({name:"houseRelation",params:{type:this.type}}):this.$router.push({name:"comHouse",query:{type:this.type}})}},beforeRouteLeave:function(t,e,s){t.meta.keepAlive=!0,s()}}),r=o,n=(s("d63b"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"2e928f45",null);e["a"]=l.exports},"386b":function(t,e,s){var i=s("5ca1"),a=s("79e5"),o=s("be13"),r=/"/g,n=function(t,e,s,i){var a=String(o(t)),n="<"+e;return""!==s&&(n+=" "+s+'="'+String(i).replace(r,"&quot;")+'"'),n+">"+a+"</"+e+">"};t.exports=function(t,e){var s={};s[t]=e(n),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",s)}},"44e1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.ishouse?s("div",{staticClass:"pages"},[t.flag?s("div",{staticClass:"weui-cells mar_top0"},[s("div",{staticClass:"weui-cell ly-cell weui-cell_access",on:{click:t.getBindRoom}},[t._m(0),s("div",{staticClass:"weui-cell__bd"},[s("p",[t._v(t._s(t.houseTitle))])]),s("div",{staticClass:"weui-cell__ft ft_color"},[t._v("更换")])])]):t._e(),s("div",[t.repairData.length>0?s("div",{staticClass:"hasData mar_top10"},[t._l(t.repairData,function(e){return s("div",{staticClass:"weui-panel weui-panel_access ly-panel",on:{click:function(s){return t.Repairxq(e.code)}}},[s("div",{staticClass:"repair_data_header"},["repair"===t.type||"prorepair"===t.type?s("div",{staticClass:"header_left"},[s("span",{staticClass:"state",class:"weixiu"+e.status}),"1"===e.status?s("span",[t._v("待维修")]):"2"===e.status?s("span",[t._v("已维修")]):"3"===e.status?s("span",[t._v("已完成")]):s("span",[t._v("已评价")])]):s("div",{staticClass:"header_left"},[s("span",{staticClass:"state",class:"chuli"+e.status}),"1"===e.status?s("span",[t._v("处理中")]):"2"===e.status?s("span",[t._v("处理中")]):"3"===e.status?s("span",[t._v("已完成")]):s("span",[t._v("已评价")])]),s("div",{staticClass:"header_right"},[s("span",{staticClass:"repair_time"},[t._v(t._s(e.created_at))])])]),s("div",{staticClass:"weui-panel__bd"},[s("div",{staticClass:"weui-media-box ly-media-box weui-media-box_appmsg"},[s("div",{staticClass:"weui-media-box__bd"},[s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[0]))]),s("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?e.repair_area:e.relation_room))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),s("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?e.repair_type:e.type))])]),s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[2]))]),s("p",{staticClass:"wx_flex"},[t._v("\n                                    "+t._s("repair"===t.type||"prorepair"===t.type?"微信提交":e.complaint_type))])]),t.isShow?s("div",{staticClass:"repair_data"},[s("p",{staticClass:"label"},[t._v(t._s(t.comData[3]))]),s("p",{staticClass:"wx_flex"},[t._v(t._s(e.title))])]):t._e()])])]),t._m(1,!0)])}),s("com-loading",{ref:"loader",attrs:{pagecount:t.allcount},on:{loadmore:t.getMore}})],2):s("div",{staticClass:"notData"},[s("p",{staticClass:"repair_tip"},[t._v(t._s(t.comTip))]),s("p",{staticClass:"repair_tip2"},[t._v(t._s(t.comTip2))])]),s("div",{staticClass:"weui-btn-area area"},[s("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.addRepair}},[t._v(t._s(t.comBtn))]),s("button",{staticClass:"weui-btn ly-btn_whiter",on:{click:t.reClose}},[t._v("返回")])])])]):t._e()},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__hd header_img"},[i("img",{attrs:{src:s("4fc8")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"weui-panel__ft"},[s("a",{staticClass:"weui-cell weui-cell_access weui-cell_link",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"weui-cell__bd xq"},[t._v("详情")]),s("div",{staticClass:"weui-cell__ft"})])])}],o=(s("7f7f"),s("d722")),r=s("3594"),n=s("bda5"),l={data:function(){return{repair:["报修区域:","报修项目:","报修渠道:"],Complaint:["房产:","类型:","类别:","标题:"],repairBtn:"新增报修",plaintBtn:"新增咨询投诉",stateColor:"",repairData:[],comData:[],type:"",comTip:"",comTip2:"",isShow:!1,title:"",comBtn:"",current:1,guid:"",allcount:0,flag:!1,ishouse:!1,houseTitle:"请选择",pageSize:2,scroll:0}},created:function(){var t=this;this.type=this.$route.query.type,"complaint"===this.type||"proplaint"===this.type?(this.title="咨询投诉",this.comData=this.Complaint,this.isShow=!0,this.comTip="您还没有咨询投诉记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.plaintBtn,this.comInit(this.type)):(this.guid=this.$store.state.roomId.roomGuid,this.guid?(this.houseTitle=this.$store.state.roomId.roomName,this.comInit(this.type)):Object(o["m"])().then(function(e){if(0===e.code){t.houseTitle=e.result[0].room_name,t.guid=e.result[0].room_guid;var s={roomName:t.houseTitle,roomGuid:t.guid};t.$store.commit("setRoomId",s),t.comInit(t.type)}else t.$weui.alert(e.msg)}),this.title="房屋报修",this.comData=this.repair,this.comTip="您本人在当前房屋没有报修记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.repairBtn)},mounted:function(){window.addEventListener("scroll",this.handelScroll)},activated:function(){var t=this;this.type===this.$route.query.type&&1!==this.$store.state.reFresh||(this.scroll=0,this.stateColor="",this.current=1,this.flag=!1,this.ishouse=!1,this.repairData=[],this.isShow=!1,this.type=this.$route.query.type,window.addEventListener("scroll",this.handelScroll),"complaint"===this.type||"proplaint"===this.type?(this.title="咨询投诉",this.comData=this.Complaint,this.isShow=!0,this.comTip="您还没有咨询投诉记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.plaintBtn,this.comInit(this.type)):(this.guid=this.$store.state.roomId.roomGuid,this.guid?(this.houseTitle=this.$store.state.roomId.roomName,this.comInit(this.type)):Object(o["m"])().then(function(e){0===e.code?(t.houseTitle=e.result[0].room_name,t.guid=e.result[0].room_guid,t.comInit(t.type)):t.$weui.alert(e.msg)}),this.title="房屋报修",this.comData=this.repair,this.comTip="您本人在当前房屋没有报修记录。",this.comTip2="仅能本看本人报修记录，不支持查看其他人对本房屋的报修。",this.comBtn=this.repairBtn)),this.scroll>0?(console.log(this.scroll),window.scrollTo(0,this.scroll),this.scroll=0,window.addEventListener("scroll",this.handelScroll)):window.scrollTo(0,0)},deactivated:function(){window.removeEventListener("scroll",this.handelScroll)},components:{ComHeader:r["a"],ComLoading:n["a"]},methods:{comInit:function(t){var e=this,s="";1===this.current&&(s=this.$weui.loading());var i={room_guid:this.guid,current_page:this.current,page_size:this.pageSize},a={current_page:this.current,page_size:this.pageSize},r={relation_guid:this.$store.state.relationId,current_page:this.current,page_size:this.pageSize};"repair"===t?Object(o["o"])(i).then(function(t){if(1===e.current?(e.repairData=[],s.hide()):e.$refs.loader.isload=!0,console.log(t),0===t.code)for(var i in e.ishouse=!0,e.flag=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[i]);else e.$weui.alert(t.msg)}):"complaint"===t?Object(o["n"])(a).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],s.hide()):e.$refs.loader.isload=!0,0===t.code)for(var i in e.ishouse=!0,e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[i]);else e.$weui.alert(t.msg)}):"prorepair"===t?Object(o["N"])(i).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],s.hide()):e.$refs.loader.isload=!0,0===t.code){for(var i in e.flag=!0,e.ishouse=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[i]);console.log(e.repairData)}else e.$weui.alert(t.msg)}):"proplaint"===t&&Object(o["L"])(r).then(function(t){if(console.log(t),1===e.current?(e.repairData=[],s.hide()):e.$refs.loader.isload=!0,0===t.code)for(var i in e.ishouse=!0,console.log(e.current),e.allcount=t.result.page_count,t.result.query_list)e.repairData.push(t.result.query_list[i]);else e.$weui.alert(t.msg)})},getBindRoom:function(){this.$router.push({name:"comHouse",query:{type:this.type}})},addRepair:function(){"repair"===this.type||"prorepair"===this.type?this.$router.push({name:"AddRepair",params:{type:this.type}}):"complaint"!==this.type&&"proplaint"!==this.type||this.$router.push({name:"Relate",params:{type:this.type}})},reClose:function(){"repair"===this.type||"complaint"===this.type?this.$router.push("/home"):this.$router.push("/estate")},handelScroll:function(){this.scroll=document.documentElement&&document.documentElement.scrollTop,console.log(this.scroll)},Repairxq:function(t){this.$store.commit("setRoomCode",t),"repair"===this.type||"prorepair"===this.type?this.$router.push({name:"HouseReMsg",query:{type:this.type}}):this.$router.push({name:"plaintMsg",query:{type:this.type}})},getMore:function(t){var e=this;this.current=t,setTimeout(function(){e.comInit(e.type)},800)}},beforeRouteEnter:function(t,e,s){s(function(t){document.title=t.title})},beforeRouteLeave:function(t,e,s){"comHouse"===t.name||this.$store.commit("delReFresh"),s()}},c=l,u=(s("742f"),s("2877")),p=Object(u["a"])(c,i,a,!1,null,"25db34f2",null);e["default"]=p.exports},"4fc8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAqCAMAAAAK/cKeAAAAtFBMVEUAAAAnpfknpflPsfQnpfknpfknpfl6vu0npfl6vu16vu0npfl6vu0npfl6vu0npfknpfknpfl6vu0npfknpfknpfl6vu0npfknpfknpfknpfl6vu0npfknpfknpfknpfknpfknpfknpfl6vu0npfknpfl6vu0npfknpfknpfknpfknpfl6vu0npfknpfknpfknpfl6vu0npfknpfknpfknpfknpfknpfknpfl6vu0npfl6vu31d9BmAAAAOnRSTlMACfAF2zYOC/v4s6WVW0GeFOrXtXx4K/PhvpqPjk9JIPXWyLyUg3wuKALSzJBsajsa1MG6qm1iVEMq6O2XwgAAAdhJREFUOMt1k9liqkAQRAcExBgUxS3uJhr3JfvN4f//69IsGRGsl6aasqumcdQV7FVgmZhWsLJVCYyThYZ1NG4FkwF5DCb5AUNpmk1v4yhn4zVNocOrMc6TvO/qjtEVzZOT8YoI6n5uql8XSSVlYtEtRO+KURpSCwqSSew5iCxUGSKjgWQ7QSvL8Dtq12rt0W96gBYco2rBV5r4MUzxWI0bR7CiVYNpJIKX8A8vlTiACbbqQFPFkAkPjWq18SBT4lYTOioAL2a9qP+aaF+jx548eBBIjHXcHkUTVIpoykjqWoKYkCy3HYaNTNEIw3Z8GugrYBt3a2FYzRTVMKxJ3YIrM/y7Ch9a6hn+lbm8ST3DXo1hVZb0ILUDSzUF695pxeBHVVqZTXFjG+gbSmyCO1tfJvueuWCXfjm/n76pw4dK0DtEX//t0EvYCp6lxkOmqojLPOtLEssoKpoyQv+XxgWB7cI5I9/g3l7Vyh4+Nf2ARd5H1mleNJ31oV7w+LpueICnNIwFvG9v78Z8rekS+rOM6B9ZfsZ+9EiNjalv8npeeg2nLnzG1pcB7AxVxInkUzo7aGUhCitgWHHeYW6rcoyBYA/uRN3DkhjfGb9j5ObOWTzRYnfOd/4D6GJZSo18hSIAAAAASUVORK5CYII="},"55ff":function(t,e,s){"use strict";var i=s("9cb1"),a=s.n(i);a.a},"742f":function(t,e,s){"use strict";var i=s("2ec5"),a=s.n(i);a.a},"7f7f":function(t,e,s){var i=s("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,r="name";r in a||s("9e1e")&&i(a,r,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"9cb1":function(t,e,s){},b54a:function(t,e,s){"use strict";s("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},bb21:function(t,e,s){},bda5:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loadAll"},[t.current<t.allcount&&t.isload?s("div",{staticClass:"loadMore",on:{click:t.getMore}},[t._v("\n\t\t加载更多\n\t\t"),s("span")]):t.current===t.allcount&&t.isload?s("div",{staticClass:"theEnd"},[t._v("已加载全部")]):t._e(),t.isload?t._e():s("div",{staticClass:"weui-loadmore"},[s("i",{staticClass:"weui-loading"}),s("span",{staticClass:"weui-loadmore__tips load_tip"},[t._v("正在加载")])])])},a=[],o={props:["pagecount"],data:function(){return{current:1,allcount:0,isload:!0}},created:function(){this.allcount=this.pagecount},methods:{getMore:function(){this.current++,this.isload=!1,this.$emit("loadmore",this.current)}}},r=o,n=(s("55ff"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,null,null);e["a"]=l.exports},d63b:function(t,e,s){"use strict";var i=s("bb21"),a=s.n(i);a.a}}]);