(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fba09a8"],{"36c5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pages"},[a("ul",{staticClass:"nav_tab"},[a("li",{staticClass:"liAfter",class:{"is-actived":"All"===t.currentView},on:{click:function(e){return t.changeFlightMode("All")}}},[a("span",[t._v("全部")])]),a("li",{class:{"btn-actived":t.isView},on:{click:function(e){return t.changeFlightMode("shaixuan")}}},[t._m(0)])]),t.changes?a("div",{staticClass:"porject_lett"},[a("repair-list",{ref:"childList",attrs:{senddata:t.currentView,xsdata:t.checkData}})],1):t._e(),a("transition",{attrs:{name:"slideRight",appear:""}},[a("router-view",{staticStyle:{"animation-duration":"0.3s"},on:{checkdata:t.getChecked}})],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shaixuan"},[a("span",[t._v("筛选")])])}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hasData?a("div",{staticClass:"repairTop"},[a("div",{staticClass:"allNum"},[t._v("共有"),a("span",[t._v(t._s(t.total))]),t._v("条记录")]),t.repairData.length>0?a("div",{staticClass:"hasData mar_top10"},[t._l(t.repairData,function(e){return a("div",{staticClass:"weui-panel weui-panel_access ly-panel",on:{click:function(a){return t.Repairxq(e.code)}}},["pcomplaint"===t.type?a("div",{staticClass:"line"}):t._e(),a("div",{staticClass:"repair_data_header"},[a("div",{staticClass:"header_left"},[a("span",{staticClass:"state",class:"weixiu"+e.status}),"1"===e.status?a("span",[t._v(t._s(t.comState[0]))]):"2"===e.status?a("span",[t._v(t._s(t.comState[1]))]):"3"===e.status?a("span",[t._v(t._s(t.comState[2]))]):a("span",[t._v(t._s(t.comState[3]))])]),"pcomplaint"===t.type?a("div",{staticClass:"header_right"},[a("span",{staticClass:"plaintType",class:"咨询"===e.type?"zixun":"tousu"},[t._v(t._s(e.type))])]):t._e()]),a("div",{staticClass:"weui-panel__bd",class:"pcomplaint"===t.type?"mar_top15":""},[a("div",{staticClass:"weui-media-box ly-media-box weui-media-box_appmsg"},[a("div",{staticClass:"weui-media-box__bd"},[a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[0]))]),a("p",{staticClass:"wx_flex"},[t._v(t._s(e.created_at))])]),"prepair"===t.type?a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),a("p",{staticClass:"wx_flex"},[t._v(t._s(e.city))])]):t._e(),"pcomplaint"===t.type?a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[1]))]),a("p",{staticClass:"wx_flex",domProps:{innerHTML:t._s(!0===e.is_relation_room?"有":"无")}})]):t._e(),a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[2]))]),a("p",{staticClass:"wx_flex"},[t._v(t._s("prepair"===t.type?e.repair_room:e.complaint_room))])]),a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[3]))]),a("p",{staticClass:"wx_flex"},[t._v(t._s("prepair"===t.type?e.repair_area:e.complaint_type))])]),a("div",{staticClass:"repair_data"},[a("p",{staticClass:"label"},[t._v(t._s(t.comData[4]))]),a("p",{staticClass:"wx_flex"},[t._v(t._s("prepair"===t.type?e.repair_type:e.title))])])])])]),t._m(0,!0)])}),a("com-loading",{ref:"loader",attrs:{pagecount:t.allCount},on:{loadmore:t.getMore}})],2):a("div",{staticClass:"notData"},[a("p",{staticClass:"repair_tip"},[t._v(t._s(t.comTip))])]),a("div",{staticClass:"weui-btn-area area"},[a("button",{staticClass:"weui-btn ly-btn_defalut",on:{click:t.reClose}},[t._v("返回")])])]):t._e()},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-panel__ft"},[a("a",{staticClass:"weui-cell weui-cell_access weui-cell_link",attrs:{href:"javascript:void(0);"}},[a("div",{staticClass:"weui-cell__bd xq"},[t._v("详情")]),a("div",{staticClass:"weui-cell__ft"})])])}],o=a("6860"),c=a("bda5"),l={props:["senddata","xsdata"],data:function(){return{repair:["时间:","城市:","房屋:","区域:","项目:"],Complaint:["时间:","关联:","房屋:","类别:","标题:"],stateTxt:["待维修","已维修","已完成","已评价"],stateTxt2:["处理中","已回复","已完成","已评价"],stateColor:"",repairData:[],comData:[],comTip:"",type:"",allCount:0,pageSize:2,total:0,current:1,hasData:!1,scroll:0,stateTab:"",plaintData:[],comState:[]}},created:function(){this.type=this.$route.params.type,this.stateTab=this.$store.state.currentId,this.init(this.type)},mounted:function(){window.addEventListener("scroll",this.handelScroll)},activated:function(){console.log(this.stateTab),this.type!==this.$route.params.type&&(this.hasData=!1,this.repairData=[],this.current=1,this.scroll=0,this.type=this.$route.params.type,this.init(this.type),console.log("执行了")),this.scroll>0&&(console.log(this.scroll),window.scrollTo(0,this.scroll),this.scroll=0,window.addEventListener("scroll",this.handelScroll))},deactivated:function(){window.removeEventListener("scroll",this.handelScroll)},components:{ComLoading:c["a"]},methods:{init:function(t){"pcomplaint"===t?(this.comData=this.Complaint,this.comTip="当前无咨询投诉记录。",this.comState=this.stateTxt2,this.plintInt()):(this.comData=this.repair,this.comTip="当前没有报修记录。",this.comState=this.stateTxt,this.repairInt())},plintInt:function(){var t=this,e={current_page:this.current,page_size:this.pageSize};if("All"===this.stateTab)1===this.current&&this.$weui.loading(),Object(o["O"])(e).then(function(e){t.results(e)});else if(this.$store.state.addRepair.page_size){1===this.current&&(this.hasData=!1,this.$weui.loading());var a={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,channel:this.$store.state.addRepair.channel,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date,property_name:this.$store.state.addRepair.end_date,company_name:this.$store.state.addRepair.company_name,project_name:this.$store.state.addRepair.project_name,building_name:this.$store.state.addRepair.building_name,floor_name:this.$store.state.addRepair.floor_name,room_name:this.$store.state.addRepair.room_name,content:this.$store.state.addRepair.content};Object(o["O"])(a).then(function(e){t.results(e)})}},repairInt:function(){var t=this,e={current_page:this.current,page_size:this.pageSize};console.log(this.stateTab);if("All"===this.stateTab)1===this.current&&this.$weui.loading(),Object(o["R"])(e).then(function(e){t.results(e)});else if(this.$store.state.addRepair.page_size){1===this.current&&(this.hasData=!1,this.$weui.loading());var a={current_page:this.current,page_size:this.$store.state.addRepair.page_size,status:this.$store.state.addRepair.status,channel:this.$store.state.addRepair.channel,start_date:this.$store.state.addRepair.start_date,end_date:this.$store.state.addRepair.end_date,property_name:this.$store.state.addRepair.end_date,company_name:this.$store.state.addRepair.company_name,project_name:this.$store.state.addRepair.project_name,building_name:this.$store.state.addRepair.building_name,floor_name:this.$store.state.addRepair.floor_name,room_name:this.$store.state.addRepair.room_name,content:this.$store.state.addRepair.content};Object(o["R"])(a).then(function(e){t.results(e)})}},results:function(t){if(1===this.current&&(this.repairData=[],this.$weui.loading().hide()),0===t.code){for(var e in this.hasData=!0,console.log(this.current),1!==this.current&&(this.$refs.loader.isload=!0),this.allCount=t.result.page_count,t.result.query_list)this.repairData.push(t.result.query_list[e]);this.total=t.result.rows_total}else this.$weui.alert(t.msg)},Repairxq:function(t){this.$router.push({name:"PropertyMsg",query:{type:this.type,code:t}})},getMore:function(t){var e=this;this.current=t,this.$store.state.addRepair.current_page=2,console.log(this.$store.state.addRepair.current_page),setTimeout(function(){e.init(e.type)},800)},handelScroll:function(){this.scroll=document.documentElement&&document.documentElement.scrollTop},reClose:function(){this.$router.push("/staffhome")}},watch:{},beforeRouteLeave:function(t,e,a){this.$store.commit(setReFreshs,0),a()}},p=l,d=(a("dee2"),a("2877")),h=Object(d["a"])(p,r,n,!1,null,"c43e84ba",null),u=h.exports,_={data:function(){return{currentView:"All",title:"",hardList:[],areaMode:!0,parentShow:"",isView:!1,changes:!0,checkData:[],type:""}},created:function(){this.type=this.$route.params.type,"complaint"===this.$route.params.type?this.title="咨询投诉管理":this.title="报修管理","shaixuan"===this.currentView?this.isView=!0:this.isView=!1},activated:function(){this.type!==this.$route.params.type&&(this.currentView=this.$store.state.currentId,this.type=this.$route.params.type,"complaint"===this.$route.params.type?this.title="咨询投诉管理":this.title="报修管理"),"shaixuan"===this.currentView?(this.changes=!0,this.isView=!0):(console.log(this.currentView),this.isView=!1)},components:{RepairList:u},methods:{changeFlightMode:function(t){var e=this;this.currentView=t,"shaixuan"===t?(this.$router.push({name:"CScreen",query:{type:this.$route.params.type}}),this.changes=!1,console.log(this.changes),this.isView=!0):(this.changes=!1,setTimeout(function(){e.changes=!0},300),this.isView=!1),this.$store.commit("delAddRepair"),this.$store.commit("setcurrentId",t)},getChecked:function(t){this.checkData=t,console.log(this.checkData)}},watch:{currentView:function(t,e){t&&(this.currentView=t)}},beforeRouteEnter:function(t,e,a){a(function(t){document.title=t.title})}},m=_,f=(a("486b"),Object(d["a"])(m,s,i,!1,null,"e9e7a396",null));e["default"]=f.exports},"37d2":function(t,e,a){},"486b":function(t,e,a){"use strict";var s=a("eca3"),i=a.n(s);i.a},"55ff":function(t,e,a){"use strict";var s=a("9cb1"),i=a.n(s);i.a},"9cb1":function(t,e,a){},bda5:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loadAll"},[t.current<t.allcount&&t.isload?a("div",{staticClass:"loadMore",on:{click:t.getMore}},[t._v("\n\t\t加载更多\n\t\t"),a("span")]):t.current===t.allcount&&t.isload?a("div",{staticClass:"theEnd"},[t._v("已加载全部")]):t._e(),t.isload?t._e():a("div",{staticClass:"weui-loadmore"},[a("i",{staticClass:"weui-loading"}),a("span",{staticClass:"weui-loadmore__tips load_tip"},[t._v("正在加载")])])])},i=[],r={props:["pagecount"],data:function(){return{current:1,allcount:0,isload:!0}},created:function(){this.allcount=this.pagecount},methods:{getMore:function(){this.current++,this.isload=!1,this.$emit("loadmore",this.current)}}},n=r,o=(a("55ff"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,null,null);e["a"]=c.exports},dee2:function(t,e,a){"use strict";var s=a("37d2"),i=a.n(s);i.a},eca3:function(t,e,a){}}]);